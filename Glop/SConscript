import SCons.Util
import scons_utils
import os
import platform
Import('global_env')
env = global_env.Clone()
Export('env')

env.Replace(PROJECT_ROOT = os.path.join(os.getcwd(), 'source' + os.sep))
env.Replace(PACKAGE_STACK = ['all'])
env.Replace(LOADED_PACKAGES_MAP = {})
env.Append(CPPPATH = ['#Glop/source/'])

env.SConscript('source/SConscript')
package = env.LoadPackage('/glop')

Glop = env.CompleteLibrary(
    objs = package['objects'],
    headers = package['headers'],
    libs = package['libs'],
    framework_structure = env['GLOBAL_ROOT'] + 'Glop/OSX/framework.framework')
Return('Glop')
